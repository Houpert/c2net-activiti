<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
	xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
	xmlns:dc="http://www.omg.org/spec/DD/20100524/DC">

	<xsl:template match="bpmn:definitions">
		<xsl:copy>
			<xsl:copy-of select="@*" />
		</xsl:copy>

		<xsl:for-each select="bpmn:process">
			<process>
				<xsl:for-each select="node()">

					<!-- EVENT -->
					<xsl:if test="name() = 'bpmn:startEvent'">
						<startEvent>
							<xsl:copy-of select="@* | bpmn:extensionElements" />
							<xsl:copy-of select="@* | bpmn:outgoing" />
						</startEvent>
					</xsl:if>

					<xsl:if test="name() = 'bpmn:endEvent'">
						<endEvent>
							<xsl:copy-of select="@* | bpmn:incoming" />
						</endEvent>
					</xsl:if>

					<!-- FLOW -->
					<xsl:if test="name() = 'bpmn:sequenceFlow'">
						<sequenceFlow>
							<xsl:copy-of select="@* | bpmn:conditionExpression" />
						</sequenceFlow>
					</xsl:if>



					<!-- GATEWAY -->
					<xsl:if test="name() = 'bpmn:exclusiveGateway'">
						<exclusiveGateway>
							<xsl:copy-of select="@* | bpmn:incoming" />
							<xsl:copy-of select="@* | bpmn:outgoing" />
						</exclusiveGateway>
					</xsl:if>

					<!-- TASK -->
					<xsl:if test="name() = 'bpmn:task'"></xsl:if>
					<xsl:if test="name() = 'bpmn:userTask'"></xsl:if>
					<xsl:if test="name() = 'bpmn:manualTask'"></xsl:if>

				</xsl:for-each>

			</process>
		</xsl:for-each>

	</xsl:template>

</xsl:stylesheet>